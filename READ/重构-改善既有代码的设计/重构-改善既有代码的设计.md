# 重构：改善既有代码的设计

## Tips
- 如果你要给程序添加一个特性，但发现代码因缺乏良好的结构而不易于进行更改，那就先重构那个程序，使其比较容易添加该特性，然后再添加该特性。
- 重构前，先检查自己是否有一套可靠的测试集。这些测试必须有自我检验能力。
- 重构技术就是以微小的步伐修改程序。如果你犯下错误，很容易便可发现它。
- 傻瓜都能写出计算机可以理解的代码。唯有能写出人类容易理解的代码的，才是优秀的程序员。
- 编程时，需要遵循营地法则：保证你离开时的代码库一定比来时更健康。
- 好代码的检验标准就是人们是否能轻而易举地修改它。
- 小的步子可以更快前进，请保持代码永远处于可工作状态，小步修改累积起来也能大大改善系统的设计。
- 如果有人说他们的代码在重构过程中有一两天时间不可用，基本上可以确定，他们在做的事不是重构。
- 肮脏的代码必须重构，但漂亮的代码也需要很多重构。
- 每次要修改时，首先令修改很容易（警告：这件事有时会很难），然后再进行这次容易的修改。
- 重构的唯一目的就是让我们开发更快，用更少的工作量创造更大的价值。
- 重构的意义不在于把代码库打磨得闪闪发光，而是纯粹经济角度出发的考量。我们之所以重构，因为它能让我们更快——添加功能更快，修复bug更快。一定要随时记住这一点，与别人交流时也要不断强调这一点。重构应该总是由经济利益驱动。
- 用封装变量（132）来确保所有数据更新操作都通过很少几个函数来进行，使其更容易监控和演进。
- 当你感觉需要撰写注释时，请先尝试重构，试着让所有注释都变得多余。
- 确保所有测试都完全自动化，让它们检查自己的测试结果。
- 一套测试就是一个强大的bug侦测器，能够大大缩减查找bug所需的时间。
- 编写测试代码其实就是在问自己：为了添加这个功能，我需要实现些什么？编写测试代码还能帮我把注意力集中于接口而非实现
- 频繁地运行测试。对于你正在处理的代码，与其对应的测试至少每隔几分钟就要运行一次，每天至少运行一次所有的测试。
- 编写未臻完善的测试并经常运行，好过对完美测试的无尽等待。
- 考虑可能出错的边界条件，把测试火力集中在那儿。
- 不要因为测试无法捕捉所有的bug就不写测试，因为测试的确可以捕捉到大多数bug。
- 每当你收到bug报告，请先写一个单元测试来暴露这个bug。