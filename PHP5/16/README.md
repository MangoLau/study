# 第16章 PHP Shell脚本编程    PHP Shell Scripting
## 16.1 介绍  Introduction
## 16.2 PHP CLI Shell 脚本
### 16.2.1 CLI 如何区别于CGI     How CLI Differs from CGI
#### 默认参数
    CLI针对一些命令行选项有着不同的默认值和php.ini设置

|设置/选项|CLI/默认|描述|
|:-:|:-:|:-:|
|-q选项|开启|在输出中抑制HTTP头信息|
|-C选项|开启|PHP不会更改它的工作目录到主脚本的目录|
|html_errors|关闭|PHP的错误信息将是普通的文本，而不是HTML|
|implicit _flush|开启||
|register_argc_argv|开启|注册$argc和$argv全局变量，无视在php.ini中register_argc_argv的设置|
|max_execution_time|0|PHP让脚本执行的最长的时间（用秒计算）；0表示没有限制|

#### 额外的选项
    在PHP的CLI中有许多的命令行选项是CGI没有提供的

|设置/选项|CLI/默认|描述|
|:-:|:-:|:-:|
|-r 代码|无|像PHP代码一样运行代码（不再需要<?php）|
|-R 代码|无|把标准输入的每一行作为代码运行|
|-B 代码|无|在处理-R或者-F之前运行代码|
|-E 代码|无|在处理-R或者-F之后运行代码|
|-F 文件|无|每次输入行就执行文件|

#### php.ini名称和位置
#### 其他不同点
### 16.2.2 Shell脚本编程环境  The Shell-Scripting Environment
#### 用户输入
#### 执行周期
#### Hash-Bang声明
    在类UNIX的系统上，如果一个可执行文件的首两个字符是“#!”（叫做hash-bang），该行剩下来的内容将被看作是执行文件的程序名。
    指定的程序将被调用，而且脚本的名字作为第一个参数，后面的参数是给脚本的参数。

### 16.2.3 解析命令行选项  Parsing Command-Line Options
### 16.2.4 良好的习惯    Good Practices
#### 使用信息
#### 退出代码
    如果脚本执行失败，使用一个非0代码退出（255除外，它被PHP自身保留用作编译/解析错误）。
    如果脚本没有失败，用0代码退出。

#### 错误信息
    把脚本的名字加到所有的错误信息前面，让用户可以看出错误时产生于哪个脚本。

### 16.2.5 进程控制     Process Control
#### 进程
    一个进程表示的是操作系统执行的一段代码。
    在UNIX系统中，进程包含执行代码、环境变量、堆栈内存、堆（动态分配）内存、文件描述符还有安全属性例如用户id。
#### Forking
    Forking是一个UNIX术语，表示通过复制一个现有的进程来创建一个新的进程。
    复制（子进程）进程从父进程继承代码、环境、内存（写时才copy）、文件描述符和所有的内容。
#### Exec
    当一个程序运行另外一个程序的时候，第二个程序的执行事实上是一个两步的过程。
    首先，调用进程创建子进程并且创建一个自身的副本，然后马上做一个exec调用来替换新程序的执行代码和内存。
#### 信号
    在UNIX中，信号是一个基础的在进程之间传递信息的极致。
### 16.2.6 例子   Examples
#### PHP过滤功能
## 16.3 总结